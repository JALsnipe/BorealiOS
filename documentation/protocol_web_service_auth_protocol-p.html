<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>BorealiOS Networking Library: &lt;WebServiceAuthProtocol&gt; Protocol Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BorealiOS Networking Library
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">Network Code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="#pub-static-methods">Class Methods</a> &#124;
<a href="protocol_web_service_auth_protocol-p-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">&lt;WebServiceAuthProtocol&gt; Protocol Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Classes implementing this protocol can be used to authorize WebServiceRequests.  
 <a href="protocol_web_service_auth_protocol-p.html#details">More...</a></p>

<p><code>#import &lt;<a class="el" href="_web_service_auth_protocol_8h_source.html">WebServiceAuthProtocol.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for &lt;WebServiceAuthProtocol&gt;:</div>
<div class="dyncontent">
<div class="center"><img src="protocol_web_service_auth_protocol-p__inherit__graph.png" border="0" usemap="#_3_web_service_auth_protocol_4_inherit__map" alt="Inheritance graph"/></div>
<map name="_3_web_service_auth_protocol_4_inherit__map" id="_3_web_service_auth_protocol_4_inherit__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for &lt;WebServiceAuthProtocol&gt;:</div>
<div class="dyncontent">
<div class="center"><img src="protocol_web_service_auth_protocol-p__coll__graph.png" border="0" usemap="#_3_web_service_auth_protocol_4_coll__map" alt="Collaboration graph"/></div>
<map name="_3_web_service_auth_protocol_4_coll__map" id="_3_web_service_auth_protocol_4_coll__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:a6d256ae50dce2c5da98b995df22ff8d4"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_web_service_auth_protocol-p.html#a6d256ae50dce2c5da98b995df22ff8d4">signRequestIfNecesary:</a></td></tr>
<tr class="memdesc:a6d256ae50dce2c5da98b995df22ff8d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">signs the request if necessary  <a href="#a6d256ae50dce2c5da98b995df22ff8d4">More...</a><br/></td></tr>
<tr class="separator:a6d256ae50dce2c5da98b995df22ff8d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcc08ee9fd6f2a18b55def6d63f76a72"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_web_service_request.html">WebServiceRequest</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_web_service_auth_protocol-p.html#adcc08ee9fd6f2a18b55def6d63f76a72">updateAccessToken:async:</a></td></tr>
<tr class="memdesc:adcc08ee9fd6f2a18b55def6d63f76a72"><td class="mdescLeft">&#160;</td><td class="mdescRight">tells the WebServiceAuth object to update its access token.  <a href="#adcc08ee9fd6f2a18b55def6d63f76a72">More...</a><br/></td></tr>
<tr class="separator:adcc08ee9fd6f2a18b55def6d63f76a72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bb7214bf24d30b796a67c1ac0afc01c"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_web_service_auth_protocol-p.html#a4bb7214bf24d30b796a67c1ac0afc01c">isAuthenticated</a></td></tr>
<tr class="memdesc:a4bb7214bf24d30b796a67c1ac0afc01c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is used to inform whether the auth object is ready to sign requests.  <a href="#a4bb7214bf24d30b796a67c1ac0afc01c">More...</a><br/></td></tr>
<tr class="separator:a4bb7214bf24d30b796a67c1ac0afc01c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac162f31fad9ac1d6f32a0e0a156eca34"><td class="memItemLeft" align="right" valign="top">(NSError *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_web_service_auth_protocol-p.html#ac162f31fad9ac1d6f32a0e0a156eca34">reauthError</a></td></tr>
<tr class="memdesc:ac162f31fad9ac1d6f32a0e0a156eca34"><td class="mdescLeft">&#160;</td><td class="mdescRight">generates a reauth error so that the <a class="el" href="interface_web_service_manager.html" title="Class for managing web service requests This class has a sharedManager singleton object. Trying to allocate your own should get you the shared object.">WebServiceManager</a> can kick it up to the application level  <a href="#ac162f31fad9ac1d6f32a0e0a156eca34">More...</a><br/></td></tr>
<tr class="separator:ac162f31fad9ac1d6f32a0e0a156eca34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae018349565d2d0950a6c16cefbdbb145"><td class="memItemLeft" align="right" valign="top">(NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_web_service_auth_protocol-p.html#ae018349565d2d0950a6c16cefbdbb145">serviceIdentifier</a></td></tr>
<tr class="memdesc:ae018349565d2d0950a6c16cefbdbb145"><td class="mdescLeft">&#160;</td><td class="mdescRight">all objects must have a service identifier. It is used for identifying the object to the <a class="el" href="interface_web_service_manager.html" title="Class for managing web service requests This class has a sharedManager singleton object. Trying to allocate your own should get you the shared object.">WebServiceManager</a>. It is also used for saving to the keychain.  <a href="#ae018349565d2d0950a6c16cefbdbb145">More...</a><br/></td></tr>
<tr class="separator:ae018349565d2d0950a6c16cefbdbb145"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Class Methods</h2></td></tr>
<tr class="memitem:ad64dba7571637cb2e03b6a550e7ec6f8"><td class="memItemLeft" align="right" valign="top">(NSString *)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="protocol_web_service_auth_protocol-p.html#ad64dba7571637cb2e03b6a550e7ec6f8">authTypeIdentifier</a></td></tr>
<tr class="memdesc:ad64dba7571637cb2e03b6a550e7ec6f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">all objects must have an auth type identifier. It identifies the type of authorization being used. This might be something like OAuth2.  <a href="#ad64dba7571637cb2e03b6a550e7ec6f8">More...</a><br/></td></tr>
<tr class="separator:ad64dba7571637cb2e03b6a550e7ec6f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Classes implementing this protocol can be used to authorize WebServiceRequests. </p>
<h2>Implementation Notes</h2>
<p>All classes adhering to this protocol must implement the <a class="el" href="class_n_s_coding-p.html">NSCoding</a> protocol. This enables encoding/decoding for the saving of auth information to the keychain.</p>
<h2>Signing Requests</h2>
<p>The method used to sign requests is signRequestIfNecessary. An NSMutableURLRequest is passed into the method so that the object can perform the necessary changes to allow authentication to succeed. Typically this involves adding appropriate headers to the request. It may also involve changing the URL to add query parameters, though in this case the method should check for existing query parameters and when they are present, add to them.</p>
<h2>Keychain Saving</h2>
<p>All objects implementing this protocol should conform to <a class="el" href="class_n_s_coding-p.html">NSCoding</a> so that they can be archived by the <a class="el" href="interface_web_service_manager.html" title="Class for managing web service requests This class has a sharedManager singleton object. Trying to allocate your own should get you the shared object.">WebServiceManager</a> to the keychain. Typically one would like to cache tokens because in mobile world a token may be valid for several hours to months. Extra requests to re-authorize can be avoided by saving tokens to the keychain.</p>
<p>Because these objects can be saved to the keychain they should be kept to a the minimum size needed to save authorization data. Tokens, expiration date, username and password are examples of data that might be kept.</p>
<p>Auth information is identified in the application's keychain based on two keys. The first is an auth type string, returned by a class method, which can/should indicate the auth protocol being used, such as OAuth2 or some string to represent proprietary auth mechanism.</p>
<p>The second is more customizable, allowing each object to be identified as a service. If only one signing authority is needed for a particular site, then it could be that site's name, i.e. 'mygreatsite'. If multiple authorities for that site are needed to be saved, a naming scheme would could be something like 'mygreatsite-user1' and 'mygreatsite-user2'.</p>
<p>Only one auth object can be stored in the keychain for each combination of AuthType and Service. Additionally only one auth object for a particular service identifier can be used by the <a class="el" href="interface_web_service_manager.html" title="Class for managing web service requests This class has a sharedManager singleton object. Trying to allocate your own should get you the shared object.">WebServiceManager</a> at any given time. The reason for having both keys is down do the oddities of the keychain services. </p>
</div><h2 class="groupheader">Method Documentation</h2>
<a class="anchor" id="ad64dba7571637cb2e03b6a550e7ec6f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">+ (NSString*) authTypeIdentifier </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">required</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>all objects must have an auth type identifier. It identifies the type of authorization being used. This might be something like OAuth2. </p>
<p>This is primarily used for keychain saving. The combination of authTypeIdentifier and serviceIdentifier uniquely identify the auth object in the keychain.</p>
<dl class="section return"><dt>Returns</dt><dd>string representing the auth type </dd></dl>

</div>
</div>
<a class="anchor" id="a4bb7214bf24d30b796a67c1ac0afc01c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isAuthenticated </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">required</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is used to inform whether the auth object is ready to sign requests. </p>
<dl class="section return"><dt>Returns</dt><dd>whether the auth object has been authenticated </dd></dl>

</div>
</div>
<a class="anchor" id="ac162f31fad9ac1d6f32a0e0a156eca34"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (NSError*) reauthError </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">required</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>generates a reauth error so that the <a class="el" href="interface_web_service_manager.html" title="Class for managing web service requests This class has a sharedManager singleton object. Trying to allocate your own should get you the shared object.">WebServiceManager</a> can kick it up to the application level </p>
<dl class="section return"><dt>Returns</dt><dd>the reauth Error </dd></dl>

</div>
</div>
<a class="anchor" id="ae018349565d2d0950a6c16cefbdbb145"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (NSString*) serviceIdentifier </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">required</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>all objects must have a service identifier. It is used for identifying the object to the <a class="el" href="interface_web_service_manager.html" title="Class for managing web service requests This class has a sharedManager singleton object. Trying to allocate your own should get you the shared object.">WebServiceManager</a>. It is also used for saving to the keychain. </p>
<p>If connection is to mygreatsite, this might be "mygreatsite". There will only ever be auth one auth object for a service in active use, though others may be stored in the keychain. If multiple accounts for the same service want to be saved/used, they should be called something like "mygreatsite-kermit47"</p>
<dl class="section return"><dt>Returns</dt><dd>string representing the service being used. </dd></dl>

</div>
</div>
<a class="anchor" id="a6d256ae50dce2c5da98b995df22ff8d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) signRequestIfNecesary: </td>
          <td></td>
          <td class="paramtype">(NSMutableURLRequest *)&#160;</td>
          <td class="paramname"><em>urlRequest</em></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">required</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>signs the request if necessary </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">urlRequest</td><td>the request to be signed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the auth token needs to be refreshed </dd></dl>

</div>
</div>
<a class="anchor" id="adcc08ee9fd6f2a18b55def6d63f76a72"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_web_service_request.html">WebServiceRequest</a>*) updateAccessToken: </td>
          <td></td>
          <td class="paramtype">(WebServiceCallbackBlock)&#160;</td>
          <td class="paramname"><em>callback</em></td>
        </tr>
        <tr>
          <td class="paramkey">async:</td>
          <td></td>
          <td class="paramtype">(BOOL)&#160;</td>
          <td class="paramname"><em>performAsync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">required</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>tells the WebServiceAuth object to update its access token. </p>
<p>Though a web request is returned, this method is expected to start the request through the <a class="el" href="interface_web_service_manager.html" title="Class for managing web service requests This class has a sharedManager singleton object. Trying to allocate your own should get you the shared object.">WebServiceManager</a>. If there is no valid way to update the token this method should return nil and call the callback with an appropriate error. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>the callback block it should call upon completion </td></tr>
    <tr><td class="paramname">performAsync</td><td>whether the reauth call should happen asyncronously. This flag represents whether the <a class="el" href="interface_web_service_request.html" title="The base WebServiceRequest class. Used for submission to the WebServiceManager. Implements the callba...">WebServiceRequest</a> that required the signing was started synchronously or asynchronously. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="interface_web_service_request.html" title="The base WebServiceRequest class. Used for submission to the WebServiceManager. Implements the callba...">WebServiceRequest</a> that is performing the re-auth. </dd></dl>

</div>
</div>
<hr/>The documentation for this protocol was generated from the following file:<ul>
<li>/Users/siebed/applico/github/BorealiOS/<a class="el" href="_web_service_auth_protocol_8h_source.html">WebServiceAuthProtocol.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 18 2013 10:46:27 for BorealiOS Networking Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
